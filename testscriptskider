-- ✅ Đảm bảo game đã load xong
repeat wait() until game:IsLoaded() and game.Players.LocalPlayer

-- 🔑 Lấy key và hwid từ getgenv() hoặc user ID Roblox
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")

local key = getgenv().Key or ""
local hwid = gethwid and gethwid() or tostring(Players.LocalPlayer.UserId)

-- 🌐 Domain để trực tiếp – không encode
local domain = "shopgiare.cfd"
local url = "https://" .. domain .. "/api/checkhwid.php?key=" .. key .. "&hwid=" .. hwid

-- 🌐 Gửi request xác thực key
local success, response = pcall(function()
    return HttpService:JSONDecode(game:HttpGet(url))
end)

-- ❌ Nếu lỗi thì kick
if not success then
    Players.LocalPlayer:Kick("Không thể kết nối tới server. Liên hệ admin.")
    return
end

-- ❌ Nếu key không hợp lệ thì cũng kick
if response.status ~= "true" then
    Players.LocalPlayer:Kick("Key hoặc HWID không hợp lệ.")
    return
end

-- ✅ Nếu key hợp lệ
print("✔ Key hợp lệ, script tiếp tục chạy...")

game.StarterGui:SetCore("SendNotification", {
    Title = "Zush Hub",
    Text = "Xác minh thành công!",
    Duration = 5
})
loadstring(game:HttpGet("https://raw.githubusercontent.com/TBoyRoblox727/YTShiTV/refs/heads/main/source_ShiTV.txt"))()
